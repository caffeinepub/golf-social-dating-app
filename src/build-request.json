{
  "kind": "build_request",
  "title": "Add user messaging functionality for course members to connect",
  "projectName": "Lime Greens",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-49",
      "text": "Add a 'Message' button to each member profile card in the CourseDirectory page that initiates a new conversation with that member",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-yes"
        ],
        "quotes": [
          "Add user messaging functionality so course members can connect with each other"
        ]
      },
      "acceptanceCriteria": [
        "Each member profile card in the CourseDirectory displays a 'Message' button",
        "Clicking the 'Message' button navigates to the ChatPage with that member's conversation pre-selected",
        "Button is styled consistently with the golf theme using courseGreen or fairwayGreen colors"
      ]
    },
    {
      "id": "REQ-50",
      "text": "Add a 'Message' button to the ProfileDetailPage that allows users to initiate a conversation with the profile owner",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-yes"
        ],
        "quotes": [
          "Add user messaging functionality so course members can connect with each other"
        ]
      },
      "acceptanceCriteria": [
        "ProfileDetailPage displays a prominent 'Message' button below or alongside the profile information",
        "Clicking the button navigates to the ChatPage with the profile owner's conversation active",
        "Button is disabled if viewing own profile with appropriate visual feedback"
      ]
    },
    {
      "id": "REQ-51",
      "text": "Add a 'Message' button to each match profile card in the MapView page that initiates a conversation with the matched user",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-yes"
        ],
        "quotes": [
          "Add user messaging functionality so course members can connect with each other"
        ]
      },
      "acceptanceCriteria": [
        "Each match profile card displays a 'Message' button alongside the 'View Profile' button",
        "Clicking the button navigates to the ChatPage with that user's conversation pre-selected",
        "Button styling is consistent with other messaging entry points across the app"
      ]
    },
    {
      "id": "REQ-52",
      "text": "Update ChatPage to automatically open or create a conversation when navigated to with a specific user Principal ID passed via route parameters or state",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-yes"
        ],
        "quotes": [
          "Add user messaging functionality so course members can connect with each other"
        ]
      },
      "acceptanceCriteria": [
        "ChatPage accepts a target user Principal ID via route navigation state or URL parameter",
        "If a conversation with the target user exists, it is automatically selected and displayed",
        "If no conversation exists, a new empty conversation thread is displayed with the target user",
        "Message input field is focused and ready for the user to compose their first message"
      ]
    }
  ],
  "constraints": [
    "Do not modify the existing chat backend implementation or message storage logic",
    "Maintain consistency with the existing golf-themed visual design system",
    "Preserve the current ChatPage message composition and conversation management functionality"
  ],
  "nonGoals": [
    "Implementing real-time message notifications or push alerts",
    "Adding message read receipts or typing indicators beyond what already exists",
    "Creating group chat or multi-user conversation features",
    "Implementing message search or filtering capabilities"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}